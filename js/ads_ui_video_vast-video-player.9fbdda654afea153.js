"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32935],{567935:function(e,t,r){r.d(t,{r:function(){return V},Z:function(){return q}});var i=r(390239),n=r(263123),o=r(873759),l=r(245260),a=r(466046),s=r(156055);var u=r(300599);function c(e){return e.nodeType===e.DOCUMENT_NODE}function d(e,t,r){return e?Array.from(e.querySelectorAll(t)).map(r):[]}class v extends Error{constructor(e,t,r){super("VASTError(".concat(e,")")),this.code=e,this.node=t,this.details=r||{}}}const h=e=>{if(!e)return"";const t=Array.from(e.childNodes).filter((e=>e.nodeType===e.CDATA_SECTION_NODE));return t.length?t[0].data:(e.textContent||"").trim()},m=e=>{const t=e.querySelectorAll("Tracking");return Array.from(t,(e=>{var t;return{event:(null===(t=e.attributes[0])||void 0===t?void 0:t.value)||"",trackingUrl:h(e)}}))},g=e=>{const t={},r=h(e);for(let o=0;o<e.attributes.length;o++){var i;const r=null===(i=e.attributes[o])||void 0===i?void 0:i.name;var n;if(r)t[r]=(null===(n=e.attributes[o])||void 0===n?void 0:n.value)||""}return{content:r,attributes:t}},p=e=>{const t=e.querySelectorAll("MediaFile"),r=Array.from(t,g).map((e=>{let{content:t,attributes:r}=e;return{videoSrc:t,attributes:r,width:parseInt(null===r||void 0===r?void 0:r.width,10)||0,height:parseInt(null===r||void 0===r?void 0:r.height,10)||0}})),i=e.querySelectorAll("ClosedCaptionFile"),n=Array.from(i,g).filter((e=>{let{attributes:t}=e;return"en"!==(null===t||void 0===t?void 0:t.lang)||"text/vtt"!==(null===t||void 0===t?void 0:t.type)})).map((e=>{let{content:t,attributes:r}=e;return{src:t,lang:r.language,attributes:r}})),o=e.querySelector("ClickThrough"),l=document.createElement("video");return{mediaFiles:r.filter((e=>{var t,r;return""!==l.canPlayType(null===(t=e.attributes)||void 0===t?void 0:t.type)&&"streaming"!==(null===e||void 0===e||null===(r=e.attributes)||void 0===r?void 0:r.delivery)})),trackFiles:n,duration:w(h(e.querySelector("Duration"))),trackingEvents:m(e),clickTracking:d(e,"ClickTracking",h),...o?{clickThrough:h(o)}:{}}};const w=e=>{if(!e)return 0;const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseInt(e,10)||0},[r,i,n=""]=e.split(":"),[o,l]=n.split(".");return t(l)+1e3*(t(o)+60*t(i)+3600*t(r))},f=e=>{const t=(new DOMParser).parseFromString(e,"application/xml"),r=t.querySelector("parsererror");if(r)throw new v(100,t,{xmlParsingError:r.textContent||""});!function(e){const t=e.documentElement;if(!t||"VAST"!==t.nodeName)throw new v(101,e);const r=t.getAttribute("version");if(!r||Number.isNaN(Number.parseFloat(r))||Number.parseFloat(r)<4)throw new v(102,e)}(t);const i=t.querySelector("Ad");var n;const o=null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:"";if(!i)throw new v(101,t);const l=Array.from(t.getElementsByTagName("InLine"));if(!(null===l||void 0===l?void 0:l.length)){if(i.querySelector("Wrapper"))throw new v(300,t);throw new v(400,t)}return l.map((e=>((e,t)=>{const r=d(t,"Impression",h),i=d(t,"ViewableImpression",(e=>({viewable:h(e.querySelector("Viewable")),notViewable:h(e.querySelector("NotViewable")),viewUndetermined:h(e.querySelector("ViewUndetermined"))}))),n=t.querySelector('Extensions > Extension[type="wmt"] > auto_generated'),o={autoGeneratedCC:"1"===h(n)};if(r.some((e=>!e.length)))throw new v(101,t);const l=Array.from(t.querySelectorAll("Creative > Linear")).map(p);if(!l.length)throw new v(200,t);if(!l.some((e=>{var t;return(null===(t=e.mediaFiles)||void 0===t?void 0:t.length)>0})))throw new v(403,t);return{adId:e,creatives:l,impressionBeacons:r,viewableBeacons:i,extensions:o}})(o,e)))},k=e=>!c(e)&&e.closest("Ad")?d(e.closest("Ad"),"Error",h):c(e)?d(e,"Error",h):d(e.ownerDocument,"Error",h),b=(e,t)=>{let r=e;return Object.entries(t).forEach((e=>{let[t,i]=e;r=r.replace(new RegExp("\\[".concat(t,"\\]"),"g"),i)})),r},y=(e,t,r)=>Math.abs(r-e)<Math.abs(t-e);class C{setDuration(e){this.duration=e,this.quartiles={start:0,firstQuartile:Math.round(25*this.duration)/100,midpoint:Math.round(50*this.duration)/100,thirdQuartile:Math.round(75*this.duration)/100}}fireTrackingEvent(e,t){const r=this.trackingEvents.filter((t=>{let{event:r}=t;return r===e}));if(r){const e=r.map((e=>{let{trackingUrl:t}=e;return t}));this.track(e,!0)}this.onEvent&&this.alwaysFiredEvents.includes(e)&&this.onEvent({type:e,...t&&{viewRecord:t}})}handleTimeUpdate(e,t){if(this.duration>0&&e>0){this._fireImpression(t);for(const r in this.quartiles){(this.quartiles[r]||0)<=e&&!this.alreadyTriggeredQuartiles[r]&&(this.fireTrackingEvent(r,t),this.alreadyTriggeredQuartiles[r]=!0)}}}_fireImpression(e){!this.isImpressionTriggered&&this.onEvent&&(this.onEvent({type:"impression",...e&&{viewRecord:e}}),this.isImpressionTriggered=!0)}handleTracking(e,t,r){switch(e){case"timeupdate":this.handleTimeUpdate(t,r);break;case"ended":this.isCompleteTriggered||(this.fireTrackingEvent("complete",r),this.isCompleteTriggered=!0);break;case"play":this.alreadyTriggeredQuartiles.start&&this.fireTrackingEvent("resume",r);break;case"mute":case"unmute":case"pause":this.fireTrackingEvent(e,r)}}constructor(e,t=o.UP,r){var i;this.alreadyTriggeredQuartiles={},this.creative=e,this.track=t,this.trackingEvents=e.trackingEvents||[],this.duration=null!==(i=e.duration)&&void 0!==i?i:0,this.isCompleteTriggered=!1,this.isImpressionTriggered=!1,this.onEvent=r,this.alwaysFiredEvents=["start","firstQuartile","midpoint","thirdQuartile","complete","resume"],this.quartiles={start:0,firstQuartile:Math.round(25*this.duration)/100,midpoint:Math.round(50*this.duration)/100,thirdQuartile:Math.round(75*this.duration)/100}}}var T=r(575115),E=r(295368),x=r(803528),S=r(369538);var A=()=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"white",fillOpacity:"0.7"}),(0,i.jsx)("path",{d:"M6 12C6 8.68629 8.68629 6 12 6C13.5219 6 14.9107 6.56605 15.9688 7.5H14.5C14.2239 7.5 14 7.72386 14 8C14 8.27614 14.2239 8.5 14.5 8.5H16.8779C17.2231 8.5 17.5029 8.22018 17.5029 7.875V5.5C17.5029 5.22386 17.2791 5 17.0029 5C16.7268 5 16.5029 5.22386 16.5029 5.5V6.64037C15.286 5.61704 13.7147 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 11.7239 18.7761 11.5 18.5 11.5C18.2239 11.5 18 11.7239 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12Z",fill:"black"})]});const N=[100,101,102,403,405];var B=e=>{let{error:t,retryVideoPlayer:r,thumbnail:n}=e;var o;const l={error:t},a=null===l||void 0===l||null===(o=l.error)||void 0===o?void 0:o.code;return(0,i.jsx)("div",{className:"relative skeleton-bone w-100",children:(0,i.jsxs)("div",{className:"relative flex items-center justify-center h-100 w-100",children:[(0,i.jsx)(x.Z,{alt:(0,T.m)(S,"videPosterImage"),src:n,preload:!0,loading:"eager",height:"100%",width:"100%"}),(0,i.jsxs)("div",{className:"absolute z-2o-70 top-0 left-0 ph1 ma3",children:[(0,i.jsx)("span",{className:"black bg-white",children:"00:00"}),(0,i.jsx)("span",{className:"white ml1",children:(0,T.m)(S,"videoError2")})]}),a&&!N.includes(a)&&(0,i.jsx)("div",{className:"absolute z-2 top-0 right-1 mt3",children:(0,i.jsx)(E.Z,{className:"pl2 z-1","aria-label":"retryVideo",onClick:()=>r([a]),variant:"tertiary",children:(0,i.jsx)(A,{})})})]})})},M=r(837261);const V=(0,s.forwardRef)(((e,t)=>{let{vasttag:r,configPreset:c="default",enableTracking:d=!0,showAutoGenCCDisclaimerCcm:h=!1,redirectsOnClick:m,clickMacroReplacement:g,thumbnail:p,loop:w,onEvent:T,onClick:E,features:x,...S}=e;var A,N;const{enableVASTErrorEx:V,ipBr1VideoTimeoutMs:q,videoCCEnable:I,enableVideoUIErrorState:P,enableVideoTracker:j}=(0,n.v)(),{0:F,1:D}=(0,s.useState)(!0),{0:R,1:O}=(0,s.useState)(!1),U=(0,s.useRef)(),{0:_,1:Q}=(0,s.useState)(!1),{0:Z,1:G}=(0,s.useState)(),L=(0,s.useRef)(null),z=(0,s.useRef)(),H=(0,s.useRef)();(0,s.useEffect)((()=>{H.current=T}),[T]);const W=(0,s.useCallback)((e=>{(null===H||void 0===H?void 0:H.current)&&"function"===typeof H.current&&H.current(e)}),[H]),Y=(0,s.useMemo)((()=>{try{return f(r)}catch(e){return G(e),[]}}),[r]),J=null===Y||void 0===Y?void 0:Y[0],K=(null===J||void 0===J?void 0:J.creatives)&&J.creatives[0],X=(null===J||void 0===J?void 0:J.extensions)&&J.extensions,$=(null===X||void 0===X?void 0:X.autoGeneratedCC)&&h,ee=(0,s.useMemo)((()=>d?async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];try{await(0,o.UP)(...t)}catch(i){}}:async()=>{}),[d]),te=(0,s.useMemo)((()=>K?new C(K,ee,W):null),[K,W,ee]);(0,s.useEffect)((()=>{if(Z&&Z instanceof v){const e=Z.node?k(Z.node):(e=>{const t=(new DOMParser).parseFromString(e,"application/xml"),r=t.querySelector("parsererror");if(r)throw new v(100,t,{xmlParsingError:r.textContent||""});return k(t)})(r);ee(e.map((e=>b(e,{ERRORCODE:Z.code.toString()})))),T&&T({type:"vast_error",error:Z,code:Z.code})}}),[Z,ee,r,T]);const re=(0,s.useCallback)((async e=>{var t;if(te&&(null===K||void 0===K||null===(t=K.clickTracking)||void 0===t?void 0:t.length)){const e=K.clickTracking.reduce(((e,t)=>[...e,ee(t)]),[]);await Promise.all(e)}E&&E(e),!(null===x||void 0===x?void 0:x.trackYabasClicks)&&m&&(null===K||void 0===K?void 0:K.clickThrough)&&(g&&Object.keys(g||{}).length?window.location.href=b(K.clickThrough,g):window.location.href=K.clickThrough)}),[te,null===K||void 0===K?void 0:K.clickTracking,null===K||void 0===K?void 0:K.clickThrough,E,g,m,ee,x]),ie=(0,s.useCallback)((e=>{var t,r,i;("play"===e.type&&te&&(null===J||void 0===J||null===(t=J.impressionBeacons)||void 0===t?void 0:t.length)&&(ee(J.impressionBeacons),Q(!1)),"ended"===e.type&&Q(!0),e.type&&te&&L.current)&&(te.setDuration((null===x||void 0===x?void 0:x.useVASTDuration)&&Number.isInteger(null===K||void 0===K?void 0:K.duration)?(null===K||void 0===K?void 0:K.duration)/1e3:null===(r=L.current)||void 0===r?void 0:r.duration),te.handleTracking(e.type,null===(i=L.current)||void 0===i?void 0:i.currentTime,e.viewRecord));T&&T(e)}),[J,T,ee,te,x,K]),ne=(0,s.useCallback)((()=>{V&&(z.current=setTimeout((()=>{G(new v(402))}),q))}),[G,q,V]),oe=(0,s.useCallback)((()=>{V&&z.current&&(clearTimeout(z.current),z.current=void 0)}),[V]),le=(0,s.useCallback)((()=>{if(V&&L.current&&L.current.error){const e=L.current.error;oe(),3===e.code||4===e.code?G(new v(405)):2===e.code?G(new v(402)):G(new v(400))}}),[L,G,oe,V]);(0,l.F)((()=>{!(null===J||void 0===J?void 0:J.viewableBeacons)||R||"IntersectionObserver"in window||(ee(J.viewableBeacons.map((e=>{let{viewUndetermined:t}=e;return t||""})).filter(Boolean)),O(!0))}),(()=>{U.current&&clearTimeout(U.current),(null===J||void 0===J?void 0:J.viewableBeacons)&&!R&&ee(J.viewableBeacons.map((e=>{let{notViewable:t}=e;return t||""})).filter(Boolean))})),(0,a.P)(L,(e=>{R||(e.isIntersecting&&(null===J||void 0===J?void 0:J.viewableBeacons)?U.current=setTimeout((()=>{ee(J.viewableBeacons.map((e=>{let{viewable:t}=e;return t||""})).filter(Boolean)),O(!0)}),u.dB):U.current&&clearTimeout(U.current))}),{threshold:u.Wq}),(0,a.P)(L,(e=>{_||D(!e.isIntersecting)}),{threshold:u.Wq,rootMargin:"-".concat(130,"px 0px 0px 0px")}),(0,s.useImperativeHandle)(t,(()=>L.current));const ae=(0,s.useMemo)((()=>{var e,t;return function(e,t){let{width:r}=e,{optimalScale:i=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return;let n=t[0];for(let o=1;o<t.length;o++){const e=t[o];y(r,((null===n||void 0===n?void 0:n.width)||0)/i,((null===e||void 0===e?void 0:e.width)||0)/i)&&(n=e)}return n}({width:parseInt((null===(e=S.width)||void 0===e?void 0:e.toString())||"",10)||(null===(t=L.current)||void 0===t?void 0:t.getBoundingClientRect().width)},(null===K||void 0===K?void 0:K.mediaFiles)||[])}),[L.current,S.width,null===K||void 0===K?void 0:K.mediaFiles]),se=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"default":return{autoPlay:!0,muted:!0,loop:!1,showPlayButton:!0,showCountdown:!0,showMuteButton:!0,endState:"rewind"};case"configPreset1":return{autoPlay:!0,muted:!0,loop:!1,showPlayButton:!0,showCountdown:!0,showMuteButton:!0,endState:"play"}}}(c),ue={error:Z},ce=(0,s.useMemo)((()=>{if((null===x||void 0===x?void 0:x.trackYabasClicks)&&(null===K||void 0===K?void 0:K.clickThrough)&&!S.cta){const e=g?b(K.clickThrough,g):K.clickThrough;return{linkText:"itemClick",clickThrough:{value:e,rawValue:e}}}return S.cta}),[x,g,null===K||void 0===K?void 0:K.clickThrough,S.cta]);return Z||(null===Z||void 0===Z?void 0:Z.resetValue)?P?(0,i.jsx)(B,{error:Z,retryVideoPlayer:e=>{ue.resetValue=e,G(void 0)},thumbnail:p||""}):(0,i.jsx)("span",{className:"dn","data-ads-error":Z,"data-testid":"VASTErrorBoundary"}):(0,i.jsx)(M.ZP,{...S,...se,features:x,onClick:re,src:null===ae||void 0===ae?void 0:ae.videoSrc,attributes:null===(A=null===K||void 0===K?void 0:K.mediaFiles[0])||void 0===A?void 0:A.attributes,paused:F,onEvent:ie,onError:le,onLoadStart:ne,onLoadedData:oe,tracks:null===K||void 0===K||null===(N=K.trackFiles)||void 0===N?void 0:N.map((e=>({src:null===e||void 0===e?void 0:e.src,lang:null===e||void 0===e?void 0:e.lang,attributes:null===e||void 0===e?void 0:e.attributes}))),ref:L,loop:w,showAutoGenCCDisclaimer:$,videoCCEnable:I,enableVideoTracker:j,cta:ce})}));var q=V}}]);