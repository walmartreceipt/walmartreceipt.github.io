"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71160],{721073:function(n,o,c){c.r(o),c.d(o,{default:function(){return E}});var t=c(390239),a=c(468620),e=c(964226),r=c(978522);const u={type:"query",name:"logout",query:"query logout{logout{errors{...LogoutErrorFragment}success}}fragment LogoutErrorFragment on IdentityLogoutError{code message}",hash:"14c95ff6999022b0707fb6f45c8563cda3357de88b59c7a4f184efc6b9de0539"},i=n=>{const o=(c=(0,e.Z)(),{queryKey:["logout-query",t={}],queryFn:()=>c.getGqlFetch()(u,t)});var c,t;return(0,r.a)({...o,config:n,networkMode:"always"})};var s=c(181114),l=c(64925),d=c(224174),g=c(158529),m=c(271492),f=c(961866),h=c(251956),p=c(623122),v=c.n(p),_=c(156055),y=c(654292),b=c(201764),w=c(760774);const C=v()((()=>c.e(66392).then(c.bind(c,46341))),{loadableGenerated:{webpack:()=>[46341]}});var E=()=>{var n;const{mart:o}=(0,s.Vg)(),{0:c,1:e}=(0,_.useState)(null),{isCachingOn:r}=(0,h.d9)(),{reCheckAuthState:u}=(0,a.Eu)(),p=(0,g.iC)(d.YL),{enableLaunchMultiSiteLogoffConfirmationModal:v,multiSiteRedirectUrl:E}=p.shared.values,A="b2b"===(null===(n=(0,f.B)().publicRuntimeConfig)||void 0===n?void 0:n.vid),P=(0,w.gv)(),B=()=>{(0,m.cM)(["info","ui","signout_error_in_query_result"],{type:"log",message:"signout_error_in_query"})},{refetch:R}=i({enabled:!1,cacheTime:0,refetchOnWindowFocus:!1,refetchOnMount:!1,onSuccess:n=>{var c,t;(null===(c=n.data)||void 0===c||null===(t=c.logout)||void 0===t?void 0:t.success)?((0,y.nJ)("b2b-org",{domain:".walmart.com"}),(0,m.cM)(["info","ui","sign_out_b2b_user","force logout b2b user"],{type:"log",message:"sign_out_b2b_user"}),r&&(0,w.gv)()&&u(),window.location.assign((0,l.p)(o,"/account/login"))):B()},onError:B}),L=(0,_.useCallback)((()=>{R()}),[R]),T=()=>{e(null),window.location.assign(E||"https://business.walmart.com/")};return(0,_.useEffect)((()=>{(w.Qg&&"true"===(0,y.ej)("b2b-org")||!1)&&!A&&(v?e(b.q.OTHER_TAB_LEAVE_B2B):L())}),[A,P,v,L]),c?(0,t.jsx)(C,{warningType:c,onConfirm:L,onClose:T}):null}},201764:function(n,o,c){var t;c.d(o,{q:function(){return t}}),function(n){n.OTHER_TAB_LEAVE_B2C="OTHER_TAB_LEAVE_B2C",n.OTHER_TAB_LEAVE_B2B="OTHER_TAB_LEAVE_B2B"}(t||(t={}))},181114:function(n,o,c){c.d(o,{Vg:function(){return r}});c(390239);var t=c(156055);const a={mart:"B2C",bu:"WALMART-US",host:"www.walmart.com"},e=(0,t.createContext)(a);e.displayName="IdentityNextTenantContext";const r=()=>(0,t.useContext)(e)},64925:function(n,o,c){c.d(o,{p:function(){return r}});var t=c(320967),a=c(163123),e=c(794667);const r=(n,o,c)=>{const r=["/account/signin","/tu-cuenta/iniciar-sesion","/account/signin/otponly","/account/login","/account/logout","/account/signin/withotpchoice","/account/signin/withpassword","/account/signup","/tu-cuenta/crear-cuenta","/account/verifyitsyou","/account/verifyyouraccount","/account/forgotpassword","/account/resetpassword","/account/sessiontimeout","/account/letsverifylater","/account/tryanotherway","/account/skipresetpassword","/account/sendnewcode","/account/setcompromised","/ouvrir-une-session","/creer-compte","/sign-in","/create-account"],{vidParam:i,modeParam:s,envParam:l,scopeParam:d,redirectUriParam:g,clientIdParam:m,nonceParam:f,stateParam:h,authFrameNonceParam:p,guestCheckoutParam:v,svpParam:_,hhfParam:y,dpsParam:b,showGXOParam:w,triggerPointParam:C,versionParam:E,journeyParam:A,referralCode:P,utmSource:B}=(0,t.vl)();let R="",L="";if("friendbuy"===B&&P&&(L="&referralCode=".concat(P,"&utm_source=").concat(B)),d&&g&&m)R=u(o,d,g,m,f,h,A),R="".concat(R).concat(L);else{if("/account/login"===o){var T,q,O;const{signInPathname:n}=(null===(T=(0,a.yu)())||void 0===T||null===(q=T.publicRuntimeConfig)||void 0===q||null===(O=q.identity)||void 0===O?void 0:O.context)||a.Of;o=n}const t=i||("B2C"===n?"oaoh":n.toLowerCase()),u=w?"&showGXO=".concat(w):"",d=s?"&mode=".concat(s):"",g=v?"&sgc=".concat(v):"",m=l?"&env=".concat(l):"",f=p?"&authFrameNonce=".concat(p):"",h=_?"&svp=".concat(_):"",A=y?"&hhf=".concat(y):"",P=b?"&dps=".concat(b):"",B=C?"&tp=".concat(C):"",U=E?"&v=".concat(E):"",k="".concat(o,"?vid=").concat(t,"&tid=0").concat(d).concat(u).concat(m).concat(f).concat(h).concat(g).concat(A).concat(P).concat(B).concat(U).concat(L),j=new URLSearchParams(location.search).get("returnUrl"),I=c?"/".concat(c):"/",S="&returnUrl=".concat(j?encodeURIComponent(j):encodeURIComponent(I));if((0,e.zj)(r).test(location.pathname))return"".concat(k).concat(S).concat(location.hash);const Z="".concat(location.pathname).concat(location.search).concat(location.hash);R="".concat(k,"&returnUrl=").concat(encodeURIComponent(Z))}return R},u=(n,o,c,t,a,e,r)=>{const u="scope=".concat(o),i="&redirect_uri=".concat(encodeURIComponent(c)),s="&client_id=".concat(t),l=a?"&nonce=".concat(a):"",d=e?"&state=".concat(e):"",g=r?"&journey=".concat(r):"",m="".concat(n,"?").concat(u).concat(i).concat(s).concat(l).concat(d).concat(g);return"".concat(m)}},794667:function(n,o,c){c.d(o,{HN:function(){return t},jc:function(){return e},zj:function(){return a}});const t=/^[-!#-'*+0-9=?A-Z^-~]+(\.[-!#-'*+0-9=?A-Z^-~]+)*@[a-zA-Z0-9-]+(\.[0-9A-Za-z]([0-9A-Za-z-]{0,61}[0-9A-Za-z])?)*(\.[a-zA-Z]{2,})*$/,a=n=>new RegExp("^(/en|/fr|)(".concat(n.join("|"),")$"),"g"),e=n=>"string"===typeof n&&(n=n.replace(/\D/g,"")).length>=10?n=n.substring(n.length-10):""}}]);