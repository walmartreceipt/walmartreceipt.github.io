"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73158],{668004:function(e,t,i){i.d(t,{L_:function(){return n},Pi:function(){return o},Xs:function(){return s},l7:function(){return r}});var a=i(271492);const s=e=>({setValue:t=>{try{return window.top.sessionStorage.setItem(e,JSON.stringify(t)),!0}catch(i){return!1}},getValue:()=>{try{const t=window.top.sessionStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}}}),n=e=>{try{return window.top.sessionStorage.removeItem(e),!0}catch(t){return!1}},o=e=>{if(!window.sessionStorage)return null;try{return window.sessionStorage.getItem(e)}catch(t){return(0,a.cM)(["error","platform","session-storage","safeGetSessionStorageItem"],t),null}},r=(e,t)=>window.sessionStorage&&window.sessionStorage.setItem(e,t)},412363:function(e,t,i){i.d(t,{P:function(){return s}});const a="https://i5.walmartimages.com/dfw/4ff9c6c9-64e4/k2-_cf34b75a-7d8e-44a1-935c-2b5bc9bb031c.v1.jpg",s=e=>{let{src:t,height:i,width:s,background:n="FFFFFF",quality:o,format:r}=e;if(!i||!s)return t||a;const[l,u]=(t||a).split("?"),c=new URLSearchParams(u||"");return c.set("odnHeight",i),c.set("odnWidth",s),c.set("odnBg",n),o&&c.set("odnDynImageQuality",o),r&&c.set("format",r),"".concat(l,"?").concat(c.toString())}},613480:function(e,t,i){i.r(t),i.d(t,{QueuingLayoutWrapper:function(){return M},default:function(){return l.Z},getQueueFooterProps:function(){return h.u},getQueueProps:function(){return h.Z},useQueueBanner:function(){return a.i},useShouldRenderQueue:function(){return r}});var a=i(394111),s=i(893109),n=i(754257),o=i(156055);const r=()=>{const{asPath:e}=(0,s.tv)().router,{queueData:t}=(0,n.B)(),i=e.includes("cart"),a=e.includes("bookslot"),r=e.includes("/qp"),l=(0,o.useMemo)((()=>{const s=i||a||r;if(t&&0!==t.length){const i=t.some((t=>t&&"customMetadata"in t&&(t.customMetadata.item.itemURL===e||(null===e||void 0===e?void 0:e.includes(t.customMetadata.item.itemID)))));return s||i}return s}),[e,i,a,r,t]);return{shouldRenderQueue:(0,o.useMemo)((()=>t&&!(0===t.length||i||a||r||t.some((t=>t&&"customMetadata"in t&&(t.customMetadata.item.itemURL===e||(null===e||void 0===e?void 0:e.includes(t.customMetadata.item.itemID))))))),[e,i,a,r,t]),isBannerPages:l}};var l=i(816173),u=i(390239),c=i(224174),m=i(234811),d=i(158529),g=i(575115),p=i(235077),v=i(230767),x=i(859427),h=i(699998),k=i(122025),f=i(668004);const j="Hurry! Less than 2 minutes left to check out for",S="Woohoo - the wait is over for",T="You just joined the line for",w=e=>{const{addSnack:t}=(0,m.useSnackbar)(),{getValue:i,setValue:a}=(0,f.Xs)("queueSnackbarHistory"),s=(0,p.wG)(),{pageTitle:n}=(0,o.useContext)(v.z1);return{QueueSnackbar:()=>{if(e&&e.length>0){const o=e.length>1,r=i()||{},{snackBarDisplayItem:l,storageUpdates:u}=Q(e,r);l&&((e,i,a,o)=>{t({message:e,UNSAFE_style:{position:"absolute",bottom:i?"35px":"10px",left:"24px",width:"400px"},onClose:e=>{(null===e||void 0===e?void 0:e.target)&&s({context:n,action:"onClick",name:"queueingSnackBar",payload:{nm:{nm:"dismiss"},ta:{ov:"queueingSnackBar"},co:{ty:o},pr:{us:a}}})}}),s({context:n,action:"overlayView",name:"queueingSnackBar",payload:{nm:{nm:"queueingSnackBar"},co:{ty:o},pr:{us:a}}})})(l.message,o,l.itemId,l.ticketState),u&&u.map((e=>a(e)))}}}},P=["valid","pending","paused"],Q=(e,t)=>{const i=e.map((e=>{const i=(0,h.Z)(e,{onOpenLeaveQueueDialog:()=>null},""),{timerProps:a}=i,{itemID:s}=e.customMetadata.item;let{name:n}=e.customMetadata.item;n=n.length>50?n.slice(0,50).concat("..."):n;const o=t[s]||{};if(a){const e=a.endTime?(0,x.ok)(a.endTime.getTime()):0;if("valid"===(null===a||void 0===a?void 0:a.ticketState)&&e<=120&&!(null===o||void 0===o?void 0:o.expiry)){const i={...t,...C(s,t,"expiry")};return{message:"".concat(j," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}if("valid"!==(null===a||void 0===a?void 0:a.ticketState)||o&&(null===o||void 0===o?void 0:o.valid)){if("pending"!==(null===a||void 0===a?void 0:a.ticketState)&&"paused"!==(null===a||void 0===a?void 0:a.ticketState)||o&&(null===o||void 0===o?void 0:o.pending))return{message:"",timeStillRemainingForTickeToExpire:0,ticketState:"",itemId:"",storageUpdate:null};{const i={...t,...C(s,t,"pending")};return{message:"".concat(T," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}}{const i={...t,...C(s,t,"valid")};return{message:"".concat(S," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}}return{message:"",timeStillRemainingForTickeToExpire:0,ticketState:"",itemId:"",storageUpdate:null}})),a=i.filter((e=>""!==e.message)),s=i.filter((e=>!!e.storageUpdate));return{snackBarDisplayItem:a.sort(((e,t)=>e.ticketState===t.ticketState?e.timeStillRemainingForTickeToExpire-t.timeStillRemainingForTickeToExpire:P.indexOf(e.ticketState)-P.indexOf(t.ticketState)))[0],storageUpdates:s.map((e=>e.storageUpdate))}},C=(e,t,i)=>({[e]:{...t[e],[i]:!0}}),M=()=>{var e;const{pageTitle:t}=(0,o.useContext)(v.z1),{push:i}=(0,s.tv)().router,{footerProps:n,ctaProps:f,leaveQueueProps:j,timerProps:S,isError:T,isLeaveDialogueLoading:P,onDismissError:Q,onConfirmLeaveQueue:C,onCloseLeaveQueue:M,onStayInLine:D,onOpenLeaveQueueDialog:y,onCloseQueueDialog:L,displayedQueueTicket:I,queueTickets:N,isQueueDialogOpen:b,ticketToLeave:F,shouldRenderError:Z}=(0,a.i)(),{QueueSnackbar:q}=w(N),R=(0,p.wG)(),U=null===(e=(0,d.iC)(c.YL).shared.values)||void 0===e?void 0:e.queueTimeToCompletePurchase,{shouldRenderQueue:B,isBannerPages:E}=r();if(!E&&Z)return(0,u.jsx)(l.Z,{float:!0,children:(0,u.jsx)(l.Z.Error,{})});let O=0;!I||"pending"!==I.state&&"paused"!==I.state?I&&"valid"===I.state&&(O=null===I||void 0===I?void 0:I.expires):O=null===I||void 0===I?void 0:I.expectedTurnTimeUnixTimestamp;const _=(0,x.ok)(O),V=[],A=[];return N&&N.length>0&&N.map((e=>("valid"===e.state&&V.push(e),"paused"!==e.state&&"pending"!==e.state||A.push(e),null))),B&&I&&"customMetadata"in I&&"expires"in I&&j?(0,u.jsxs)(u.Fragment,{children:[!b&&q(),(0,u.jsx)(p.tp,{context:t,action:"moduleView",name:"reservationTimer",payload:{nm:{nm:"reservationTimer"},li:{nm:"reservationTimer"},pr:{us:I.customMetadata.item.itemID,wt:1e3*_},ta:{mo:"reservationTimer"}},children:(0,u.jsxs)(l.Z,{isQueueDialogOpen:b,float:!0,children:[(0,u.jsxs)(l.Z.Body,{onClick:()=>j.onClick(I,b),text:j.text,queueTicket:I,children:[(0,u.jsxs)("div",{className:"flex items-center flex-auto justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[I.customMetadata.item.imageURL&&(0,u.jsx)(l.Z.Image,{name:I.customMetadata.item.name,isQueueFooterOpen:Boolean(null===n||void 0===n?void 0:n.message),src:I.customMetadata.item.imageURL,className:"mh2"}),S&&(0,u.jsx)(u.Fragment,{children:"valid"===I.state||"guaranteed"===I.customMetadata.admissionLikelihood?(0,u.jsxs)(u.Fragment,{children:[S.endTime&&(0,u.jsx)(l.Z.Timer,{endTime:S.endTime,ticketState:S.ticketState,showClockIcon:!1}),S.message&&(0,u.jsx)(l.Z.TimerMessage,{message:S.message})]}):(0,u.jsx)("p",{className:"black",children:(0,g.m)(k,"youAreInLine")})})]}),(null===f||void 0===f?void 0:f.onClick)&&(0,u.jsx)(l.Z.Cta,{queueTicket:I,onClick:f.onClick(i,R,b)})]}),(0,u.jsx)("div",{className:"w3 na2",style:{transform:"rotate(90deg)"},children:(0,u.jsx)(m.Divider,{})})]}),n&&(0,u.jsx)(l.Z.Footer,{onClick:n.onClick,message:n.message}),(0,u.jsxs)(l.Z.Dialog,{title:(0,g.m)(k,"dialogTitle",{queueTickets:N.length}),isOpen:b,onClose:L,queueTickets:N,children:[!!V.length&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"f6 pb3 white mv0",role:"heading","aria-level":3,children:(0,g.m)(k,"timerStartMessage")}),V.map((e=>{var a;const s=(0,h.Z)(e,{onOpenLeaveQueueDialog:y},t);return s.leaveQueueProps&&"customMetadata"in e&&(0,u.jsx)(l.Z.Body,{isQueueDialog:!0,onClick:()=>{var t;return null===(t=s.leaveQueueProps)||void 0===t?void 0:t.onClick(e,b)},text:s.leaveQueueProps.text,queueTicket:e,children:(0,u.jsxs)("div",{className:"flex flex-column",children:[(0,u.jsx)("div",{className:"flex mb3",children:s.timerProps&&(0,u.jsxs)(u.Fragment,{children:[s.timerProps.endTime&&(0,u.jsx)(l.Z.Timer,{endTime:s.timerProps.endTime,ticketState:s.timerProps.ticketState,showClockIcon:!1}),s.timerProps.message&&(0,u.jsx)(l.Z.TimerMessage,{isQueueDialog:!0,message:s.timerProps.message})]})}),(0,u.jsxs)("div",{className:"flex mb2",children:[(0,u.jsx)(l.Z.Image,{isQueueDialog:!0,isQueueFooterOpen:!0,name:e.customMetadata.item.name,src:e.customMetadata.item.imageURL}),(0,u.jsx)("p",{className:"f6 mt0 mr2 w-two-thirds h4",children:(0,u.jsx)(m.LineClamp,{lines:3,children:e.customMetadata.item.name})}),(0,u.jsxs)("div",{className:"flex flex-column ml-auto",children:[(0,u.jsx)("p",{className:"f5 b ma0",children:e.customMetadata.item.currentPrice}),e.customMetadata.item.wasPrice&&(0,u.jsx)("p",{className:"f7 ma0 pl2 strike",children:e.customMetadata.item.wasPrice})]})]}),(null===(a=s.ctaProps)||void 0===a?void 0:a.onClick)&&(0,u.jsx)(l.Z.Cta,{queueTicket:e,isQueueDialog:!0,onClick:s.ctaProps.onClick(i,R,b)})]})},e.customMetadata.item.itemID)}))]}),V.length>0&&A.length>0&&(0,u.jsx)("div",{className:"mb3",children:(0,u.jsx)(m.Divider,{})}),!!A.length&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"f6 pb3 white mv0",role:"heading","aria-level":3,children:(0,g.m)(k,"queueDialog",{queueTime:U})}),A.map((e=>{var a;const s=(0,h.Z)(e,{onOpenLeaveQueueDialog:y},t);return s.leaveQueueProps&&"customMetadata"in e&&(0,u.jsx)(l.Z.Body,{isQueueDialog:!0,onClick:()=>{var t;return null===(t=s.leaveQueueProps)||void 0===t?void 0:t.onClick(e,b)},text:s.leaveQueueProps.text,queueTicket:e,children:(0,u.jsxs)("div",{className:"flex flex-column",children:[(0,u.jsx)("div",{className:"flex mb3",children:s.timerProps&&"guaranteed"===e.customMetadata.admissionLikelihood?(0,u.jsxs)(u.Fragment,{children:[s.timerProps.endTime&&(0,u.jsx)(l.Z.Timer,{endTime:s.timerProps.endTime,ticketState:s.timerProps.ticketState,showClockIcon:!1}),s.timerProps.message&&(0,u.jsx)(l.Z.TimerMessage,{isQueueDialog:!0,message:s.timerProps.message})]}):(0,u.jsx)("span",{className:"black",children:(0,g.m)(k,"youAreInLine")})}),(0,u.jsxs)("div",{className:"flex mb2",children:[(0,u.jsx)(l.Z.Image,{isQueueDialog:!0,isQueueFooterOpen:!0,name:e.customMetadata.item.name,src:e.customMetadata.item.imageURL}),(0,u.jsx)("p",{className:"f6 mt0 mr2 w-two-thirds h4",children:(0,u.jsx)(m.LineClamp,{lines:3,children:e.customMetadata.item.name})}),(0,u.jsxs)("div",{className:"flex flex-column ml-auto",children:[(0,u.jsx)("p",{className:"f5 b ma0",children:e.customMetadata.item.currentPrice}),e.customMetadata.item.wasPrice&&(0,u.jsx)("p",{className:"f7 ma0 pl2 strike",children:e.customMetadata.item.wasPrice})]})]}),(null===(a=s.ctaProps)||void 0===a?void 0:a.onClick)&&(0,u.jsx)(l.Z.Cta,{queueTicket:e,isQueueDialog:!0,onClick:s.ctaProps.onClick(i,R,b)})]})},e.customMetadata.item.itemID)}))]})]}),(0,u.jsx)(l.Z.LeaveQueueDialog,{isOpen:Boolean(F),isError:T,isLeaveDialogueLoading:P,onClose:M,onStayInLine:D,onDismissError:Q,onLeaveQueue:()=>F&&C(F)})]})})]}):null}}}]);