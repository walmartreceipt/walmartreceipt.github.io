"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98350],{568159:function(e,n,i){i.r(n),i.d(n,{EReceiptSignInNudge:function(){return p},ExitPass:function(){return S.e},NPSSurvey:function(){return w},NPSSurveyModal:function(){return I.NPSSurveyModal}});var s=i(390239),t=i(468620),a=i(234811),l=i(665208),r=i(814117),o=i(938528),c=i(108283),d=i(320397),m=i(595365),u=i(158529),h=i(575115),g=i(295368),x=i(803528),v=i(969502);const N=e=>{let{signIn:n,isFullWidth:i,dataTestid:t,enableEReceiptSignInNudgeVariant:a,moduleZone:l}=e;const r="".concat(window.location.pathname).concat(window.location.search).concat(encodeURIComponent("&linkReceipt=true")).concat(window.location.hash);return(0,s.jsx)(g.Z,{variant:"primary",size:"small",onClick:()=>{n(r)},onLinkName:"signIn",onLinkExtras:{li:{nm:"signIn",lc:l},co:{nm:"signUpSignInModule",ty:"customerAcquisitionModule"}},isFullWidth:!!i,"data-testid":t,children:a?(0,h.m)(c,"save"):(0,h.m)(c,"signIn")})},p=e=>{let{className:n}=e;var i,g;const p=(0,u.iC)(r.R),S=null===(i=p.orders.values)||void 0===i?void 0:i.enableEReceiptSignInNudgeVariant,b=null===(g=p.orders.values)||void 0===g?void 0:g.enableEReceiptSignInNudgeAtTop,{signIn:j}=(0,t.Eu)(),{orderId:y}=(0,o.h)(),E=(0,v.M)(600)?b?"top":"center":"rightBottom";return(0,s.jsx)(m.ZP,{moduleContext:"orderDetails",name:"signUpSignInModule",moduleViewExtras:{co:{ty:"customerAcquisitionModule",mx:(0,h.m)(c,"signinBannerTitle"),tx:(0,h.m)(c,"signinBannerText"),zn:E},od:{id:y}},children:(0,s.jsx)("div",{className:n,children:(0,s.jsxs)(l.H,{className:"pa2 pa3-m bg-near-white-blue",children:[(0,s.jsxs)("div",{className:"flex pb0 pb3-m",children:[(0,s.jsx)(x.Z,{preload:!0,className:"mv2 flex-shrink-0",src:d.lM,alt:"E-Receipt icon",width:"50",height:"50"}),(0,s.jsxs)("div",{className:"mh3",children:[(0,s.jsx)(a.Body,{UNSAFE_className:"db f5 b",children:S?(0,h.m)(c,"signinBannerTitleVariant"):(0,h.m)(c,"signinBannerTitle")}),(0,s.jsx)(a.Body,{UNSAFE_className:"lh-solid f6 mid-gray pt1",children:S?(0,h.m)(c,"signinBannerTextVariant"):(0,h.m)(c,"signinBannerText")})]}),(0,s.jsx)("div",{className:"flex dn-m items-center",children:(0,s.jsx)(N,{signIn:j,dataTestid:"mweb-signin-cta",enableEReceiptSignInNudgeVariant:S,moduleZone:E})})]}),(0,s.jsx)("div",{className:"dn di-m",children:(0,s.jsx)(N,{signIn:j,isFullWidth:!0,dataTestid:"dweb-signin-cta",enableEReceiptSignInNudgeVariant:S,moduleZone:E})})]})})})};var S=i(928263),b=i(227297),j=i(543073),y=i(623122),E=i.n(y),k=i(156055);const f=E()((async()=>(await Promise.resolve().then(i.bind(i,246028))).NPSSurveyModal),{loadableGenerated:{webpack:()=>[246028]}}),w=e=>{let{feedback:{getFeedback:n},className:i}=e;const t=(0,v.M)(600),{0:a,1:r}=(0,k.useState)(!1),{text:o,url:c}=n,d=t?"center":"rightBottom";return(0,s.jsx)(m.ZP,{moduleContext:"orderDetails",name:"customerSurvey",moduleViewExtras:{co:{ty:"customerNpsSurvey",mx:o,zn:d}},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:i,children:(0,s.jsx)(l.H,{className:"pa3 tc",children:(0,s.jsxs)("div",{className:"pv3",children:[(0,s.jsx)(b.J,{name:"Store",size:"small",className:"pr2 blue","aria-hidden":!0}),(0,s.jsx)(j.C,{"data-automation-id":"nps-survey-link",className:"lh-copy dark-gray","aria-label":o,onLinkName:"customerSurvey",onLinkExtras:{li:{nm:"customerSurvey",lc:d},co:{ty:"customerNpsSurvey"}},onClick:()=>r(!0),children:o})]})})}),c&&a&&(0,s.jsx)(f,{surveyUrl:c,onClose:()=>r(!1)})]})})};var I=i(246028)},246028:function(e,n,i){i.r(n),i.d(n,{NPSSurveyModal:function(){return r}});var s=i(390239),t=i(508994),a=i(156055);const l="NPS_FEEDBACK_SURVEY",r=e=>{let{surveyUrl:n,onClose:i}=e;const r=(0,a.useRef)(null);return(0,s.jsx)(t.Z,{isOpen:!0,mobileComponent:"bottomsheet",desktopComponent:"panel",position:"right",size:"medium",title:"Feedback",onClose:i,children:(0,s.jsx)("div",{className:"relative vh-75 vh-100-m nl3 nl4-m nr3 nr4-m nb4 nt4-m",children:(0,s.jsx)("iframe",{id:l,"data-testid":l,className:"w-100 bn",src:n,title:"NPS_FEEDBACK_SURVEY",height:"100%",width:"100%",ref:r})})})}}}]);