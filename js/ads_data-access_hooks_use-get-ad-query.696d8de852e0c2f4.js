"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45527],{45183:function(e,t,a){a.d(t,{kT:function(){return x},Fq:function(){return T},oL:function(){return _}});var n=a(727163),o=a(263123),d=a(271492),i=a(964226),s=a(978522),l=a(752578),r=a(208872),p=a(156055),u=a(162090);const m={type:"query",name:"AdV2DisplayDSP",query:"query AdV2DisplayDSP( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment}}}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId}}...on DisplayAdDSP{assets eventTrackers link metaData templateId}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"f26454005b0cffc0bba9bf2ce413d7303d0801b6fb5fa395250189a053416cdf"},c={type:"query",name:"AdV2Display",query:"query AdV2Display( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type data{__typename...AdDataDisplayAdFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"03eccd7f171135a735b1883be162c0e8e0699da6bf7498859932a35851c83eef"},y={type:"query",name:"AdV2",query:"query AdV2( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type model title data{__typename...AdDataDisplayAdFragment __typename...AdDataSponsoredProductsFragment __typename...AdDataSponsoredVideoFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}fragment AdDataSponsoredProductsFragment on AdData{...on SponsoredProducts{adUuid adExpInfo moduleInfo products{...ProductFragment}}}fragment ProductFragment on Product{usItemId offerId badges{flags{__typename...on BaseBadge{id text key query type styleId}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought criteria{name value}}}labels{__typename...on BaseBadge{id text key}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought}}tags{__typename...on BaseBadge{id text key}}groups{__typename name members{...on BadgeGroupMember{__typename id key memberType rank slaText styleId text type}...on CompositeGroupMember{__typename join memberType styleId suffix members{__typename id key memberType rank slaText styleId text type}}}}}priceInfo{priceDisplayCodes{rollback reducedPrice eligibleForAssociateDiscount clearance strikethrough submapType priceDisplayCondition unitOfMeasure pricePerUnitUom}currentPrice{price priceString priceDisplay}wasPrice{price priceString}listPrice{price priceString}priceRange{minPrice maxPrice priceString}unitPrice{price priceString}savingsAmount{priceString}comparisonPrice{priceString}subscriptionPrice{priceString subscriptionString price minPrice maxPrice intervalFrequency duration percentageRate durationUOM interestUOM}wPlusEarlyAccessPrice{memberPrice{price priceString priceDisplay}savings{amount priceString}eventStartTime eventStartTimeDisplay}}annualEventV2 earlyAccessEvent isEarlyAccessItem eventAttributes{priceFlip specialBuy}snapEligible showOptions sponsoredProduct{spQs clickBeacon spTags}canonicalUrl numberOfReviews averageRating availabilityStatus imageInfo{thumbnailUrl allImages{id url}}name fulfillmentBadge classType type showAtc p13nData{predictedQuantity flags{PREVIOUSLY_PURCHASED{text}CUSTOMERS_PICK{text}}labels{PREVIOUSLY_PURCHASED{text}CUSTOMERS_PICK{text}}}brand}fragment AdDataSponsoredVideoFragment on AdData{...on SponsoredVideos{adUuid adExpInfo moduleInfo videos{video{vastXml thumbnail spqs}products{...ProductFragment}}}}",hash:"1515230df2f2649cc40825419a84b541a96e7432fd06e90b4766e57f132c69c5"},g={type:"query",name:"AdV3DisplayDSP",query:"query AdV3DisplayDSP( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module adContent{type data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment}}}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId}}...on DisplayAdDSP{assets eventTrackers link metaData templateId}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"76d58a8dfa4c929198f6948ce437f51516d614daecc6dead901db6c915ffd7aa"},C={type:"query",name:"AdV3Display",query:"query AdV3Display( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module adContent{type data{__typename...AdDataDisplayAdFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"27e240805408da04beb3d652c4539f5c1bd42b73cb52862d23de15e49bb700dd"},f={type:"query",name:"AdV3",query:"query AdV3( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module server adsContext adContent{type data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment __typename...AdDataSponsoredProductsFragment __typename...AdDataSponsoredVideoFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId}}...on DisplayAdDSP{assets eventTrackers link metaData templateId}}fragment AdDataSponsoredProductsFragment on AdData{...on SponsoredProducts{adUuid adExpInfo moduleInfo products{...ProductFragment}}}fragment ProductFragment on Product{usItemId offerId badges{flags{__typename...on BaseBadge{id text key query type styleId}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought criteria{name value}}}labels{__typename...on BaseBadge{id text key}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought}}tags{__typename...on BaseBadge{id text key}}groups{__typename name members{...on BadgeGroupMember{__typename id key memberType rank slaText styleId text type}...on CompositeGroupMember{__typename join memberType styleId suffix members{__typename id key memberType rank slaText styleId text type}}}}}priceInfo{priceDisplayCodes{rollback reducedPrice eligibleForAssociateDiscount clearance strikethrough submapType priceDisplayCondition unitOfMeasure pricePerUnitUom}currentPrice{price priceString priceDisplay}wasPrice{price priceString}listPrice{price priceString}priceRange{minPrice maxPrice priceString}unitPrice{price priceString}savingsAmount{priceString}comparisonPrice{priceString}subscriptionPrice{priceString subscriptionString price minPrice maxPrice intervalFrequency duration percentageRate durationUOM interestUOM}wPlusEarlyAccessPrice{memberPrice{price priceString priceDisplay}savings{amount priceString}eventStartTime eventStartTimeDisplay}}annualEventV2 earlyAccessEvent isEarlyAccessItem eventAttributes{priceFlip specialBuy}snapEligible showOptions sponsoredProduct{spQs clickBeacon spTags}canonicalUrl numberOfReviews averageRating availabilityStatus imageInfo{thumbnailUrl allImages{id url}}name fulfillmentBadge classType type showAtc p13nData{predictedQuantity flags{PREVIOUSLY_PURCHASED{text}CUSTOMERS_PICK{text}}labels{PREVIOUSLY_PURCHASED{text}CUSTOMERS_PICK{text}}}brand}fragment AdDataSponsoredVideoFragment on AdData{...on SponsoredVideos{adUuid adExpInfo moduleInfo videos{video{vastXml thumbnail spqs}products{...ProductFragment}}}}",hash:"c50ba698fff8d24347c75c8f729cf52cb8357f0d2e885f3cf993bc88a1a8acda"};var v=a(124221);const D=(e,t)=>{let{variables:a}=t;return{queryKey:["ad-v2",a],queryFn:()=>{var t,n,i;const s=(0,o.v)().displayPPMMode,l=(0,v.gI)(a.moduleType),r=null===(t=a.adRequestComposite)||void 0===t||null===(n=t.clientCapabilities)||void 0===n||null===(i=n.templateIds)||void 0===i?void 0:i.length,p=(0,o.v)().fillEmptyLocWithProductLocEnable,u=(0,o.v)().ipBbLazyLoadingEnable;p&&"ITEM"===a.pageType&&"MOBILE_WEB"===a.platform&&(0,d.cM)(["info","ads"],{type:"log",name:"ads-variables",message:"ads request",payload:a,ipBbLazyLoadingEnable:u});const g=e.getGqlFetch(l?"adsgateway":"cegateway",(e=>(t,n)=>{n.headers["ads-module-type"]=a.moduleType;let o=t;return s&&(o=(0,v.lk)(t,l)),e(o,n)}),{disablePersistedQuery:!0});return g(r?m:s&&l?c:y,a)}}},A=(e,t)=>{let{variables:a}=t;return{queryKey:["ad-v3",a],queryFn:()=>{var t,n,d;const i=(0,o.v)().displayPPMMode,s=(0,v.gI)(a.moduleType),l="DynamicAdContainer"===a.moduleType,r=(0,o.v)().enablePPMModeForDAC,p=r&&l&&!a.moduleConfigs.adModules.map((e=>e.moduleType)).some(v.Q9),u=p?a.moduleConfigs.adModules.some((e=>{var t,a;return(null===e||void 0===e||null===(t=e.clientCapabilities)||void 0===t||null===(a=t.templateIds)||void 0===a?void 0:a.length)>0})):null===(t=a.adRequestComposite)||void 0===t||null===(n=t.clientCapabilities)||void 0===n||null===(d=n.templateIds)||void 0===d?void 0:d.length,m=e.getGqlFetch(s?"adsgateway":"cegateway",(e=>(t,a)=>{let n=t;return(r?i:i&&!l)&&(n=(0,v.lk)(t,s||p)),e(n,a)}),{disablePersistedQuery:!0});return m(u?g:i&&(s||p)?C:f,a)}}},$=(e,t)=>{if((0,o.v)().fillEmptyLocWithProductLocEnable&&"ITEM"===e.pageType&&"MOBILE_WEB"===e.platform){var a,n;const o=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.adV2;(0,d.cM)(["info","ads"],{type:"log",name:"ads-response",message:"ads response",payload:{moduleType:e.moduleType,moduleConfigs:e.moduleConfigs,isAdContentDataPresent:!!(null===o||void 0===o||null===(n=o.adContent)||void 0===n?void 0:n.data),status:null===o||void 0===o?void 0:o.status}})}},x=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var d,m,c,y,g,C,f,v,A,x,P,S;const b=(0,p.useRef)((0,r.x0)()),I=(0,p.useMemo)((()=>a?Date.now():null),[a]),T=(0,p.useContext)(l.p);(0,p.useEffect)((()=>{const e=b.current;return a&&(0,n.L)({type:"ADS_QUERY_START",payload:{id:e,variables:t,tempo:T}}),()=>{(0,n.L)({type:"ADS_QUERY_CLEAR",payload:{id:e,variables:t}})}}),[a,T,t]);const _=D((0,i.Z)(),{variables:t}),{data:R,isFetching:E,...h}=(0,s.a)({..._,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});(0,p.useEffect)((()=>{if(!E&&a){const e=h.error,a=R,o=b.current,d=Date.now(),i={type:e?"ADS_QUERY_ERR":"ADS_QUERY_SUCCESS",payload:{id:o,start:I,end:d,variables:t,result:a,err:null===e||void 0===e?void 0:e.message,tempo:T}};(0,n.L)(i),$(t,R)}}),[R,a,E,h,I,T,t]);const q=null===R||void 0===R?void 0:R.data;if((0,o.v)().dspProcessingEnable&&(null===(d=t.adRequestComposite)||void 0===d||null===(m=d.clientCapabilities)||void 0===m||null===(c=m.templateIds)||void 0===c?void 0:c.length)&&"DisplayAdDSP"===(null===q||void 0===q||null===(y=q.adV2)||void 0===y||null===(g=y.adContent)||void 0===g||null===(C=g.data)||void 0===C?void 0:C.__typename)&&(Object.keys(q.adV2.adContent.data.assets||{}).includes("501")||(q.adV2.adContent.data={__typename:"DisplayAd",...(0,u.t)(q.adV2.adContent.data,"ARTEMIS")})),(0,o.v)().dspProcessingEnable&&(0,o.v)().dspMultiProcessingEnable&&(null===(f=t.adRequestComposite)||void 0===f||null===(v=f.clientCapabilities)||void 0===v||null===(A=v.templateIds)||void 0===A?void 0:A.length)&&"MultiImpDspAd"===(null===q||void 0===q||null===(x=q.adV2)||void 0===x||null===(P=x.adContent)||void 0===P||null===(S=P.data)||void 0===S?void 0:S.__typename)){const e={},t=q.adV2.adContent.data;(null===t||void 0===t?void 0:t.ads)&&t.ads.forEach((t=>{var a;(null===t||void 0===t||null===(a=t.metaData)||void 0===a?void 0:a.adLocation)&&(e[t.metaData.adLocation]=(0,u.t)(t,"ARTEMIS").json||{})})),q.adV2.adContent.data={__typename:"DisplayAd",status:"SUCCESS",json:e}}return{...h,data:q,isFetching:E}},P=(e,t,a)=>{const o=(0,p.useContext)(l.p);(0,p.useEffect)((()=>(e&&(0,n.L)({type:"ADS_QUERY_START",payload:{id:t,variables:a,tempo:o}}),()=>{(0,n.L)({type:"ADS_QUERY_CLEAR",payload:{id:t,variables:a}})})),[e,o,t,a])},S=(e,t,a,o,d,i,s)=>{const r=(0,p.useContext)(l.p);(0,p.useEffect)((()=>{if(!i&&t){const t=d,i=Date.now(),l={type:s?"ADS_QUERY_ERR":"ADS_QUERY_SUCCESS",payload:{id:a,start:o,end:i,variables:e,result:t,err:null===s||void 0===s?void 0:s.message,tempo:r}};(0,n.L)(l),$(e,d)}}),[d,t,i,s,o,r,a,e])},b=(e,t)=>{var a,n,o,d,i,s;if(null===(a=e.adRequestComposite)||void 0===a||null===(n=a.clientCapabilities)||void 0===n?void 0:n.templateIds)return null!==(s=null===(d=e.adRequestComposite)||void 0===d||null===(i=d.clientCapabilities)||void 0===i?void 0:i.templateIds)&&void 0!==s?s:[];if(t&&(null===(o=e.moduleConfigs)||void 0===o?void 0:o.adModules)){const[a]=t.split("_"),n=e.moduleConfigs.adModules.find((e=>e.moduleType===a));var l,r;if(n)return null!==(r=null===(l=n.clientCapabilities)||void 0===l?void 0:l.templateIds)&&void 0!==r?r:[]}return[]},I=(e,t)=>{if((0,o.v)().dspProcessingEnable&&t.length&&"DisplayAdDSP"===e.__typename&&!Object.keys(e.assets||{}).includes("501"))return{__typename:"DisplayAd",...(0,u.t)(e,"ARTEMIS")};if((0,o.v)().dspProcessingEnable&&(0,o.v)().dspMultiProcessingEnable&&t.length&&"MultiImpDspAd"===e.__typename){const t={};return(null===e||void 0===e?void 0:e.ads)&&e.ads.forEach((e=>{var a;(null===e||void 0===e||null===(a=e.metaData)||void 0===a?void 0:a.adLocation)&&(t[e.metaData.adLocation]=(0,u.t)(e,"ARTEMIS").json||{})})),{__typename:"DisplayAd",status:"SUCCESS",json:t}}return null},T=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,p.useRef)((0,r.x0)()),o=(0,p.useMemo)((()=>a?Date.now():null),[a]);P(a,n.current,t);const d=D((0,i.Z)(),{variables:t}),{data:l,isFetching:u,...m}=(0,s.a)({...d,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});S(t,a,n.current,o,l,u,m.error);const c=null===l||void 0===l?void 0:l.data;var y,g;if(c&&(null===(y=c.adV2)||void 0===y||null===(g=y.adContent)||void 0===g?void 0:g.data)){var C,f,v;const e=I(c.adV2.adContent.data,null!==(v=null===(C=t.adRequestComposite)||void 0===C||null===(f=C.clientCapabilities)||void 0===f?void 0:f.templateIds)&&void 0!==v?v:[]);e&&(c.adV2.adContent.data=e)}return{...m,data:c,isFetching:u}},_=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,p.useRef)((0,r.x0)()),o=(0,p.useMemo)((()=>a?Date.now():null),[a]);P(a,n.current,t);const d=A((0,i.Z)(),{variables:t}),{data:l,isFetching:u,...m}=(0,s.a)({...d,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});S(t,a,n.current,o,l,u,m.error);const c=null===l||void 0===l?void 0:l.data;var y,g;if(c&&(null===(y=c.adV3)||void 0===y||null===(g=y.adContent)||void 0===g?void 0:g.data)){var C;const e=b(t,null===(C=c.adV3)||void 0===C?void 0:C.module),a=I(c.adV3.adContent.data,e);a&&(c.adV3.adContent.data=a)}return{...m,data:c,isFetching:u}}},516778:function(e,t,a){a.d(t,{J:function(){return d},N:function(){return o}});var n=a(156055);const o=(0,n.createContext)((()=>{})),d=()=>(0,n.useContext)(o)}}]);